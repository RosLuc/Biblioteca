create table Usuario(
	UserCode integer primary key unique,
	login varchar(40) not null,
	senha varchar(40) not null,
	nome varchar(70) not null,
	email varchar(40) not null,
	cpf varchar(11) not null unique
);


create table Pessoa(
	CodInsc serial primary key unique,
	UserCode integer not null,
	Estado varchar(25) not null,
	Numero varchar(6) not null,
	Serie varchar(10) not null,
	Endereco varchar(40) not null,
	Turno varchar(10) not null,
	Bairro varchar(25) not null,
	Turma varchar not null,
	Cidade varchar(30) not null,
	Categoria varchar(20) not null,
	Email varchar(40) not null,
	Contato varchar(15) not null,
	Nome varchar(50) not null,
	Cep varchar(10),
	foreign key(UserCode) references Usuario(UserCode)
);

create table Emprestimo(
	CodiEmp serial primary key unique,
	CodInsc integer not null,
	UserCode integer not null,
	DataEmp Date not null,
	Datadev date not null,
	foreign key(UserCode) references Usuario(UserCode),
	foreign key(CodInsc) references Pessoa(CodInsc)
);

create table Prateleira(
	CodUniE integer primary key unique,
	CodiPat integer not null unique,
	corredor varchar not null,
	genero varchar(20) not null
);

create table Material(
	N_de_chamada integer primary key unique,
	Usercode integer not null ,
	codunie integer not null ,
	codipat integer not null ,
	codiemp integer not null ,
	N_de_sequencia integer not null,
	Data date not null,
	titulo varchar(30) not null,
	exemplar varchar(5) not null,
	volume integer not null,
	local varchar(30) not null,
	ano_de_publicacao integer not null,
	Forma_de_aquisicao varchar(50) not null,
	Observacao varchar(100),
	Status varchar(10) not null,
	foreign key(UserCode) references Usuario(UserCode),
	foreign key(codunie) references Prateleira(codunie),
	foreign key(codipat) references Prateleira(codipat),
	foreign key(codiemp) references Emprestimo(codiemp)
);

create table Livro(
	N_de_chamada integer primary key,
	autor varchar(50) not null,
	editora varchar(40) not null,
	foreign key(N_de_chamada) references Material(N_de_chamada)
); 

create table Multimidia(
	N_de_chamada integer primary key,
	produtor varchar(50) not null,
	estudio varchar(40) not null,
	foreign key(N_de_chamada) references Material(N_de_chamada)
);

create table Indicar(
	N_de_chamada integer not null,
	codiemp integer not null,
	foreign key(N_de_chamada) references Material(N_de_chamada),
	foreign key(codiemp) references Emprestimo(codiemp)
)